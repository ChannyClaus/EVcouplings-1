language: python
python:
  - '3.5'
  - '3.6'
before_install:
  # https://conda.io/docs/travis.html
  - sudo apt-get update
  # We do this conditionally because it saves us some downloading if the
  # version is the same.
  - if [[ "$TRAVIS_PYTHON_VERSION" == "2.7" ]]; then
      wget https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh -O miniconda.sh;
    else
      wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh;
    fi
  - bash miniconda.sh -b -p $HOME/miniconda
  - export PATH="$HOME/miniconda/bin:$PATH"
  - hash -r
  - conda config --set always_yes yes --set changeps1 no
  - conda update -q conda
  # Useful for debugging any issues with conda
  - conda info -a

  # Replace dep1 dep2 ... with your dependencies
  - conda create -q -n test-environment python=$TRAVIS_PYTHON_VERSION numpy scipy numba pandas matplotlib
  - source activate test-environment
install:
  - python setup.py sdist --formats=zip -k
  - find ./dist -iname "*.zip" -print0 | xargs -0 pip install
script:
  - python -m unittest discover -s test -p "Test*.py"
deploy:
  provider: pypi
  user: debbiemarkslab
  password:
    secure: Sb/tV/lGrmyHEJH62FLUd1E1MlsxNQh1gjNGOHcOJzaa3mvMoc2k2ImjTQK+FFnMTQ2NNPGotrKuAzgWWmOqCPzmlKOR+H+P3IceqoUX3LKxS+SFAl1NnH9PIXbhoS4qiX7/d4OkipoQYNEzGVsLljVlFOEoP4OC9OQe2lXuYd+9+fFTLMTzEreo1VF1q2A3oY/bjpny4eO43ilN6aiaFqgkST/2vy+akXL7pas+rGwe11OH+HswAcN5YJUQmaYvUirG9M99wCGrH+5p7wRdLOZHq3+KXfpQZ3NXawybYqttEi7cxsK8+Q3hdOf5s0bImuJtKqZtpj5/ie2OmwgfIqAFm9r/CuIpRQ7VPW0GcNG8xhOMUx2XpBhcy+e2Trq8o7/k7gbsSo2JStndeh1zm/1Ejk/ImOa7pSxNzazgXkaae75Oh4zG7WWzBpJ0elGSwq55SZUzXKskFAXXjL8bK77c1zt766olXLdmN+JfmrMKQURS+vJLGSVU/8zmk8GYkEP53u+u/UepsQ8N30cNZJvlxJQmwteI/FpsuY4MZ4zvnNpmpsProPMyQnE6KFI4c+fZpFcSXYbgQvkLhN0x8g9AshYKXYtWZd2/cQxWWK9tMTrkJSKKrZLhyCBFyXy1IgZp0ECPjMZYrunB/yPeIWFLACglL8d+I4pooJPwy+k= 
  on:
    tags: true

